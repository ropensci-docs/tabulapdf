<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to tabulapdf • tabulapdf</title>
<!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to tabulapdf">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">tabulapdf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.5-5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="active nav-item"><a class="nav-link" href="../articles/tabulapdf.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/tabulapdf/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Introduction to tabulapdf</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/tabulapdf/blob/master/vignettes/tabulapdf.Rmd" class="external-link"><code>vignettes/tabulapdf.Rmd</code></a></small>
      <div class="d-none name"><code>tabulapdf.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>For the user who needs raw data, PDF is not the right choice <span class="citation">[@pdfhammer; @dataversusinformation]</span>. Even if a
PDF file is created with a spreadsheet tool such as Microsoft Excel, the
resulting file does not contain information about the data structure
(i.e., rows and columns). The PDF format was created as digital paper
and one of its purposes was to share information, this is, communicating
interpretations and conclusions, something different from sharing
figures that usually belong in a database <span class="citation">[@dataversusinformation; @updatingdollars]</span>.</p>
<p>Tabula is a multi-platform tool written in Java for extracting tables
in PDF files. For the previous reasons, extracting data provided in PDFs
can be challenging and time-consuming, and this tool allows to extract
tables into a CSV or Microsoft Excel spreadsheet using a simple,
easy-to-use interface.</p>
<p>One notable use case for Tabula is in investigative journalism, and
it was used to produced parts of the following stories <span class="citation">[@tabula]</span>:</p>
<ul>
<li><a href="https://www.nytimes.com/interactive/2015/12/10/us/gun-sales-terrorism-obama-restrictions.html?_r=1" class="external-link">The
New York Times: “What Happens After Calls for New Gun Restrictions?
Sales Go Up”</a></li>
<li><a href="https://foreignpolicy.com/2014/06/13/money-down-the-drain-crs-report-details-u-s-expenses-on-iraq/" class="external-link">Foreign
Policy: “Money Down the Drain: CRS Report Details U.S. Expenses on
Iraq”</a></li>
<li><a href="https://projects.propublica.org/docdollars/" class="external-link">ProPublica:
How Industry Dollars Reached Your Doctors</a></li>
</ul>
<p> provides R bindings to the <a href="https://github.com/tabulapdf/tabula-java/" class="external-link">Tabula java
library</a>, which can be used to computationally extract tables from
PDF documents, and allows to directly import tables into R in an
automated way or by allowing user to manually select them with a
computer mouse thanks to its integration with <span class="citation">[@shiny]</span>.</p>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<p>We will demonstrate usage by reading tables from a PDF file created
with Quarto <span class="citation">[@quarto]</span> and with data
available in <span class="citation">@base</span>. The file, included in
the package, contains four tables, with the second and third tables
being on the second page to show a frequent use case that posits some
challenges for table extraction, and it can be accessed from <a href="https://github.com/ropensci/tabulapdf/blob/main/inst/examples/mtcars.pdf" class="external-link">GitHub</a>.</p>
<p>The main function, <code><a href="../reference/extract_tables.html">extract_tables()</a></code>, mimics the
command-line behavior of Tabula, by extracting tables from a PDF file
and, by default, returns those tables as a list of tibbles in R, where
the column-types are inferred by using <span class="citation">[@tidyverse]</span>.</p>
<p>The starting point is to load the package and, optionally, to set the
memory allocation for Java:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/tabulapdf/">tabulapdf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># optional: set memory for Java</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>java.parameters <span class="op">=</span> <span class="st">"-Xmx50m"</span><span class="op">)</span></span></code></pre></div>
<p>By default, <code><a href="../reference/extract_tables.html">extract_tables()</a></code> checks every page for
tables using a detection algorithm and returns all of them:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="st">"mtcars.pdf"</span>, package <span class="op">=</span> <span class="st">"tabulapdf"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extract_tables.html">extract_tables</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [[1]]</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 12</span></span></span>
<span><span class="co">##   model          mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> Mazda RX4     21       6   160   110  3.9   2.62  16.5     0     1     4     4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> Mazda RX4 W…  21       6   160   110  3.9   2.88  17.0     0     1     4     4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> Datsun 710    22.8     4   108    93  3.85  2.32  18.6     1     1     4     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> Hornet 4 Dr…  21.4     6   258   110  3.08  3.21  19.4     1     0     3     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> Hornet Spor…  18.7     8   360   175  3.15  3.44  17.0     0     0     3     2</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[2]]</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">##   Sepal.Length                   Sepal.Width    Petal.Length Petal.Width Species</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> <span style="color: #949494;">"</span>5.10\r4.90\r4.70\r4.60\r5.00<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>3.50\r3.00\r… <span style="color: #949494;">"</span>1.40\r1.40… <span style="color: #949494;">"</span>0.20\r0.2… <span style="color: #949494;">"</span>setos…</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[3]]</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">##     len supp   dose</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>   4.2 VC      0.5</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>  11.5 VC      0.5</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>   7.3 VC      0.5</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>   5.8 VC      0.5</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>   6.4 VC      0.5</span></span></code></pre>
<p>As you can see for the second table in the output, the result is not
perfect with the default parameters, which is why provides additional
functionality to improve the extraction. In some cases the extraction
should work without additional arguments.</p>
<p>The <code>pages</code> argument allows to select which pages to
attempt to extract tables from:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extract_tables.html">extract_tables</a></span><span class="op">(</span><span class="va">f</span>, pages <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [[1]]</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 12</span></span></span>
<span><span class="co">##   model          mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> Mazda RX4     21       6   160   110  3.9   2.62  16.5     0     1     4     4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> Mazda RX4 W…  21       6   160   110  3.9   2.88  17.0     0     1     4     4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> Datsun 710    22.8     4   108    93  3.85  2.32  18.6     1     1     4     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> Hornet 4 Dr…  21.4     6   258   110  3.08  3.21  19.4     1     0     3     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> Hornet Spor…  18.7     8   360   175  3.15  3.44  17.0     0     0     3     2</span></span></code></pre>
<p>It is possible to specify a remote file, which will be copied to a
temporary directory internally handled by R:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f2</span> <span class="op">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/ropensci/tabulapdf/main/inst/examples/mtcars.pdf"</span></span>
<span><span class="fu"><a href="../reference/extract_tables.html">extract_tables</a></span><span class="op">(</span><span class="va">f2</span>, pages <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="specifying-the-extraction-method">Specifying the extraction method<a class="anchor" aria-label="anchor" href="#specifying-the-extraction-method"></a>
</h2>
<p>For each page, <code><a href="../reference/extract_tables.html">extract_tables()</a></code> uses an algorithm to
determine whether it contains one consistent table and then extracts it
by using a spreadsheet-tailored algorithm with the default parameter
<code>method = "lattice"</code>.</p>
<p>The correct recognition of a table depends on whether the page
contains a table grid. If that is not the case, and the table is a
matrix of cells with values without borders, it might not be able to
recognise it.</p>
<p>The same issue appears when multiple tables with different number of
columns are present on the same page. In that case, the parameter
<code>method = "stream"</code> can be a better option as it will use the
distances between text characters on the page:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># incorrect</span></span>
<span><span class="fu"><a href="../reference/extract_tables.html">extract_tables</a></span><span class="op">(</span><span class="va">f</span>, pages <span class="op">=</span> <span class="fl">2</span>, method <span class="op">=</span> <span class="st">"lattice"</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">##   Sepal.Length                   Sepal.Width    Petal.Length Petal.Width Species</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> <span style="color: #949494;">"</span>5.10\r4.90\r4.70\r4.60\r5.00<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>3.50\r3.00\r… <span style="color: #949494;">"</span>1.40\r1.40… <span style="color: #949494;">"</span>0.20\r0.2… <span style="color: #949494;">"</span>setos…</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># correct</span></span>
<span><span class="fu"><a href="../reference/extract_tables.html">extract_tables</a></span><span class="op">(</span><span class="va">f</span>, pages <span class="op">=</span> <span class="fl">2</span>, method <span class="op">=</span> <span class="st">"stream"</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 5</span></span></span>
<span><span class="co">##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">##          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>          5.1         3.5          1.4         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>          4.9         3            1.4         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>          4.7         3.2          1.3         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>          4.6         3.1          1.5         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>          5           3.6          1.4         0.2 setosa</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="extracting-areas">Extracting areas<a class="anchor" aria-label="anchor" href="#extracting-areas"></a>
</h2>
<p> uses a table detection algorithm to automatically identify tables
within each page of a PDF. This automatic detection can be disables with
the parameter <code>guess = FALSE</code> and specifying an area within
each PDF page to extract the table from.</p>
<p>The <code>area</code> argument should be a list either of length
equal to the number of pages specified, allowing the extraction of
multiple areas from one page if the page is specified twice and with two
areas separately:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extract_tables.html">extract_tables</a></span><span class="op">(</span></span>
<span>  <span class="va">f</span>,</span>
<span>  pages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  area <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">58</span>, <span class="fl">125</span>, <span class="fl">182</span>, <span class="fl">488</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">387</span>, <span class="fl">125</span>, <span class="fl">513</span>, <span class="fl">492</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  guess <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [[1]]</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 5</span></span></span>
<span><span class="co">##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">##          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>          5.1         3.5          1.4         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>          4.9         3            1.4         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>          4.7         3.2          1.3         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>          4.6         3.1          1.5         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>          5           3.6          1.4         0.2 setosa </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[2]]</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 5</span></span></span>
<span><span class="co">##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species  </span></span>
<span><span class="co">##          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>          6.7         3            5.2         2.3 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>          6.3         2.5          5           1.9 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>          6.5         3            5.2         2   virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>          6.2         3.4          5.4         2.3 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>          5.9         3            5.1         1.8 virginica</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="interactive-table-extraction">Interactive table extraction<a class="anchor" aria-label="anchor" href="#interactive-table-extraction"></a>
</h2>
<p>In addition to the programmatic extraction offered by
<code><a href="../reference/extract_tables.html">extract_tables()</a></code>, it is also possible to work interactively
with PDFs. The <code><a href="../reference/extract_areas.html">locate_areas()</a></code> function allows to use a
computer mouse to select areas on each page of a PDF, which can then be
used to extract tables:</p>
<div class="figure">
<img src="selectarea.png" alt="Selected area in a table shown as a red rectangle with transparency over a simple table with black borders and text in white background." width="100%" height="30%"><p class="caption">
Selecting areas for table extraction.
</p>
</div>
<p>The selection from Figure 1 can be used to extract the tables as
follows:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># manual selection, result transcribed below</span></span>
<span><span class="co"># first_table &lt;- locate_areas(f, pages = 2)[[1]]</span></span>
<span><span class="co"># second_table &lt;- locate_areas(f, pages = 2)[[1]]</span></span>
<span></span>
<span><span class="va">first_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">58.15032</span>, <span class="fl">125.26869</span>, <span class="fl">182.02355</span>, <span class="fl">488.12966</span><span class="op">)</span></span>
<span><span class="va">second_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">387.7791</span>, <span class="fl">125.2687</span>, <span class="fl">513.7519</span>, <span class="fl">492.3246</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/extract_tables.html">extract_tables</a></span><span class="op">(</span><span class="va">f</span>, pages <span class="op">=</span> <span class="fl">2</span>, area <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">first_table</span><span class="op">)</span>, guess <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [[1]]</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 5</span></span></span>
<span><span class="co">##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">##          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>          5.1         3.5          1.4         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>          4.9         3            1.4         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>          4.7         3.2          1.3         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>          4.6         3.1          1.5         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>          5           3.6          1.4         0.2 setosa</span></span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extract_tables.html">extract_tables</a></span><span class="op">(</span><span class="va">f</span>, pages <span class="op">=</span> <span class="fl">2</span>, area <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">second_table</span><span class="op">)</span>, guess <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [[1]]</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 5</span></span></span>
<span><span class="co">##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species  </span></span>
<span><span class="co">##          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>          6.7         3            5.2         2.3 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>          6.3         2.5          5           1.9 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>          6.5         3            5.2         2   virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>          6.2         3.4          5.4         2.3 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>          5.9         3            5.1         1.8 virginica</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="use-case-covid-19-treatments-in-italy">Use case: COVID-19 treatments in Italy<a class="anchor" aria-label="anchor" href="#use-case-covid-19-treatments-in-italy"></a>
</h2>
<p>It is possible to extract the tables containing the number of
pharmaceutical treatments for hospitalized patients from the
<em>Monitoraggio Antivirali per COVID-19</em> (Antiviral Monitoring for
COVID-19) <span class="citation">[@agenzia]</span>.</p>
<p>It is not the case for this data, but combined cells in the header
can difficult the extraction process. It is possible to select the
figures only and set the <code>col_names</code> argument to
<code>FALSE</code> to avoid this issue.</p>
<p>The following code downloads and tidies the table for the first
report:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="st">"covid.pdf"</span>, package <span class="op">=</span> <span class="st">"tabulapdf"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># this corresponds to page four in the original document</span></span>
<span><span class="co"># locate_areas(f, pages = 1)</span></span>
<span></span>
<span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_tables.html">extract_tables</a></span><span class="op">(</span><span class="va">f</span>,</span>
<span>  pages <span class="op">=</span> <span class="fl">1</span>, guess <span class="op">=</span> <span class="cn">FALSE</span>, col_names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  area <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">140.75</span>, <span class="fl">88.14</span>, <span class="fl">374.17</span>, <span class="fl">318.93</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">covid</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"treatments"</span>, <span class="st">"pct_increase"</span><span class="op">)</span></span>
<span><span class="va">covid</span><span class="op">$</span><span class="va">treatments</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"\\."</span>, <span class="st">""</span>, <span class="va">covid</span><span class="op">$</span><span class="va">treatments</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">covid</span><span class="op">$</span><span class="va">pct_increase</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">","</span>, <span class="st">"."</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"%"</span>, <span class="st">""</span>, <span class="va">covid</span><span class="op">$</span><span class="va">pct_increase</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">/</span> <span class="fl">100</span></span>
<span></span>
<span><span class="va">covid</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 22 × 3</span></span></span>
<span><span class="co">##    region                treatments pct_increase</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> Abruzzo                     <span style="text-decoration: underline;">2</span>343        0.03 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> Basilicata                   927        0.012</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> Calabria                    <span style="text-decoration: underline;">1</span>797        0.023</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> Campania                    <span style="text-decoration: underline;">3</span>289        0.041</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> Emilia Romagna              <span style="text-decoration: underline;">7</span>945        0.1  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> Friuli Venezia Giulia       <span style="text-decoration: underline;">1</span>063        0.013</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> Lazio                      <span style="text-decoration: underline;">11</span>206        0.141</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> Liguria                     <span style="text-decoration: underline;">5</span>332        0.067</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> Lombardia                  <span style="text-decoration: underline;">12</span>089        0.153</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> Marche                      <span style="text-decoration: underline;">3</span>739        0.047</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 12 more rows</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="miscellaneous-functionality">Miscellaneous functionality<a class="anchor" aria-label="anchor" href="#miscellaneous-functionality"></a>
</h2>
<p>Tabula is built on top of the <a href="https://pdfbox.apache.org/" class="external-link">Java PDFBox library</a> <span class="citation">[@apachepdfbox]</span>, which provides low-level
functionality for working with PDFs. A few of these tools are exposed
through , as they might be useful for debugging or generally for working
with PDFs. These functions include:</p>
<ul>
<li>
<code><a href="../reference/extract_text.html">extract_text()</a></code> converts the text of an entire file or
specified pages into an R character vector.</li>
<li>
<code><a href="../reference/extract_metadata.html">extract_metadata()</a></code> extracts PDF metadata as a
list.</li>
<li>
<code><a href="../reference/get_page_dims.html">get_n_pages()</a></code> determines the number of pages in a
document.</li>
<li>
<code><a href="../reference/get_page_dims.html">get_page_dims()</a></code> determines the width and height of each
page in pt (the unit used by <code>area</code> and <code>columns</code>
arguments).</li>
<li>
<code><a href="../reference/make_thumbnails.html">make_thumbnails()</a></code> converts specified pages of a PDF
file to image files.</li>
<li>
<code><a href="../reference/split_merge.html">split_pdf()</a></code> and <code><a href="../reference/split_merge.html">merge_pdfs()</a></code> split and
merge PDF documents, respectively.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>





  </body>
</html>
